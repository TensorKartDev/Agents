name: Disk Triage Workflow
description: Disk usage triage that uses df/du output to decide cleanup guidance.

defaults:
  llm_provider: agentic.llm.provider:OllamaProvider
  llm_params:
    model: llama3.2

agents:
  disk_triage_agent:
    description: "Detects disk pressure and highlights large directories."
    tools: [disk_usage_triage]

tasks:
  - id: disk-path
    type: human_input
    agent: disk_triage_agent
    description: Provide the folder path to analyze.
    ui:
      title: Disk triage intake
      description: Enter a local folder path to analyze (df/du will run on this host).
      fields:
        - id: folder_path
          label: Folder path
          kind: path
          required: true

  - id: disk-usage-triage
    type: tool_run
    tool: disk_usage_triage
    agent: disk_triage_agent
    description: "Check disk usage and recommend cleanup targets based on df/du results."
    depends_on: [disk-path]
    input:
      path: "{{inputs.disk-path.folder_path}}"
      top_n: 5
      top_files: 10
      min_mb: 10
      timeout: 40

tools:
  disk_usage_triage:
    type: agentic.tools.builtin:DiskUsageTriageTool
